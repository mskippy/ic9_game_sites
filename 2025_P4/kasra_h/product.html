<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Product — Beneath The Quiet</title>
  <style>
    :root{ --bone:#C0AEA3; --dark:#0b0b0b; --panel:#111; --white:#fff; }
    body{ margin:0; font-family:'Cinzel',serif; background:var(--dark); color:var(--bone); }
    nav{ padding:12px; background:#000; border-bottom:2px solid var(--white); }
    nav a{ color:var(--white); margin-right:12px; text-decoration:none; }
    .wrap{ max-width:900px; margin:28px auto; padding:20px; }
    .product{ display:flex; gap:20px; align-items:flex-start; }
    .product img{ width:360px; max-width:45%; border:3px solid #000; outline:3px solid var(--white); border-radius:8px; }
    .info h1{ margin:0 0 8px 0; font-family:'Cinzel Decorative'; color:var(--bone); }
    .price{ font-weight:700; color:var(--white); margin:8px 0; }
    .sizes select{ padding:8px; border-radius:6px; background:#111; color:var(--bone); border:2px solid #000; }
    .qty input{ width:60px; padding:6px; text-align:center; border-radius:6px; }
    .addbtn{ display:inline-block; padding:10px 14px; margin-top:12px; background:#222; color:var(--white); text-decoration:none; border:2px solid #000; outline:2px solid var(--white); cursor:pointer; }
  </style>
</head>
<body>
  <nav>
    <a href="index1.html">Home</a>
    <a href="merch.html">Merch</a>
  </nav>

  <div class="wrap">
    <div id="productArea" class="product">
      <!-- filled by JS -->
      <div>Loading...</div>
    </div>
  </div>

<script>
/* same product data as merch.html — keep in sync or load externally */
const products = [
  { id: 'bb1', title: 'Black Butterfly Shirt', price:35, img:'images/blackteebutterfly.svg', sizes:['S','M','L','XL'] },
  { id: 'wb1', title: 'White Butterfly Shirt', price:35, img:'images/whitebutterflytee.svg', sizes:['S','M','L','XL'] },
  { id: 'wc1', title: 'White Silent Knight Shirt', price:35, img:'images/whitethesilentknight.svg', sizes:['S','M','L','XL'] },
  { id: 'lb1', title: 'Black Loud Boss Shirt', price:35, img:'images/blackteeloudboss.svg', sizes:['S','M','L','XL'] },
  { id: 'stick1', title: 'Sticker Sheet', price:7, img:'images/stickersheeet.svg', sizes:[] },
  { id: 'post1', title: 'Poster', price:10, img:'images/poster.svg', sizes:[] },
  { id: 'mug1', title: 'Official Mug', price:20, img:'images/mug.svg', sizes:[] },
  { id: 'pants1', title: 'Black Sweat Pants', price:45, img:'images/black sweat pants.svg', sizes:['S','M','L','XL'] }
];

function getQueryParam(name){
  const params = new URLSearchParams(window.location.search);
  return params.get(name);
}

function loadCart(){ try{ return JSON.parse(localStorage.getItem('btq_cart'))||[] }catch(e){return[]} }
function saveCart(c){ localStorage.setItem('btq_cart', JSON.stringify(c)); }

function renderProduct(prod){
  const area = document.getElementById('productArea');
  area.innerHTML = `
    <img src="${prod.img}" alt="${prod.title}">
    <div class="info">
      <h1>${prod.title}</h1>
      <div class="price">$${prod.price.toFixed(2)}</div>
      <div class="desc">A premium item from the Beneath The Quiet collection.</div>
      <div style="margin-top:12px" class="sizes">
        ${prod.sizes && prod.sizes.length ? `<label>Size: <select id="sizeSelect">${prod.sizes.map(s=>`<option>${s}</option>`).join('')}</select></label>` : `<div>One size</div>`}
      </div>
      <div class="qty" style="margin-top:10px;">
        <label>Quantity: <input id="qty" type="number" value="1" min="1"></label>
      </div>
      <button id="addCart" class="addbtn">Add to cart</button>
    </div>
  `;
  document.getElementById('addCart').addEventListener('click', ()=>{
    const size = document.getElementById('sizeSelect') ? document.getElementById('sizeSelect').value : 'One size';
    const qty = Math.max(1, parseInt(document.getElementById('qty').value||1));
    addToCart(prod.id, size, qty);
    alert('Added to cart — check the Merch page cart button.');
  });
}

function addToCart(productId, size='One size', qty=1){
  const cart = loadCart();
  const found = cart.find(i=>i.id===productId && i.size===size);
  if(found) found.qty += qty;
  else cart.push({ id: productId, size: size, qty: qty });
  saveCart(cart);
}

/* initialize */
const id = getQueryParam('id');
const prod = products.find(p=>p.id===id);
if(!prod){
  document.getElementById('productArea').innerHTML = '<div>Product not found.</div>';
} else renderProduct(prod);

</script>
</body>
</html>
